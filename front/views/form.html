<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario de Registro</title> <!-- Título de la página -->
    <link rel="stylesheet" href="../static/css/style.css"> <!-- Estilos de la página -->

    <!-- CSS de SweetAlert2 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">


</head>

<body>
    <div style="background-color: #F2F2F2; padding-top: 3%; padding-bottom: 3%;">
        <!-- Imagen centrada en la parte superior -->
        <div style="text-align: center; margin-bottom: 1%; margin-top: -1%;">
            <img src="../static/img/logo_form.png" alt="Esumer" style="width: 20%; height: auto;" />
        </div>
        <div class="form-container"> <!-- Contenedor del formulario -->
            <h1>Formulario de Inscripción</h1> <!-- Título del formulario -->
            <h3>Civica Estudiantil</h3> <!-- Título del formulario -->

            <!-- FORMULARIO -->
            <form id="registroForm" method="POST" action="/formulario/" enctype="multipart/form-data">

                <!-- Campos de Nombre Completo -->
                <div class="form-group">
                    <label for="NombreCompleto">Nombre Completo:</label>
                    <input type="text" id="NombreCompleto" name="NombreCompleto" required>
                </div>

                <!-- Campos de Apellidos -->
                <div class="form-group">
                    <label for="Apellido1">Primer Apellido:</label>
                    <input type="text" id="Apellido1" name="Apellido1" required>
                </div>
                <div class="form-group">
                    <label for="Apellido2">Segundo Apellido:</label>
                    <input type="text" id="Apellido2" name="Apellido2" required>
                </div>

                <!-- Campos de Género -->
                <div class="form-group">
                    <label for="TipoDocumento">Tipo de Documento:</label>
                    <select id="TipoDocumento" name="TipoDocumento" required>
                        <option value="">Selecciona una opción:</option>
                        <option value="C.C.">CÉDULA DE CIUDADANIA</option>
                        <option value="T.I.">TARJETA DE IDENTIDAD</option>
                        <option value="C.E.">CÉDULA DE EXTRANJERÍA</option>
                    </select>
                </div>

                <!-- Campos de número de documento -->
                <div class="form-group">
                    <label for="NroDocumento">Número de Documento:</label>
                    <input type="text" id="NroDocumento" name="NroDocumento" required>
                </div>
                <div class="form-group">
                    <label for="ConfirmNroDocumento">Confirmar Número de Documento:</label>
                    <input type="text" id="comfirmNroDocumento" name="NroDocumento" required />
                    <div id="error-message" style="color: red; display: none"></div>
                    <!-- Aquí se mostrará el mensaje de error -->
                </div>

                <!-- Campos de Dirección -->
                <div class="form-group">
                    <label for="Direccion">Dirección:</label>
                    <input type="text" id="Direccion" name="Direccion" required>
                </div>

                <!-- Campos de Fecha de Nacimiento -->
                <div class="form-group">
                    <label for="FechaNacimiento">Fecha de Nacimiento:</label>
                    <input type="date" id="FechaNacimiento" name="FechaNacimiento" required>
                </div>

                <!-- Campos de Edad -->
                <div class="form-group">
                    <label for="Edad">Edad:</label>
                    <input type="number" id="Edad" name="Edad" required readonly>
                </div>

                <!-- Campos de barrio -->
                <div class="form-group">
                    <label for="Barrio">Barrio:</label>
                    <input type="text" id="Barrio" name="Barrio" required>
                </div>

                <!-- Campos de Estrato -->
                <div class="form-group">
                    <label for="Estrato">Estrato:</label>
                    <input type="number" id="Estrato" name="Estrato" min="1" max="6" required>
                </div>

                <!-- Campo de Teléfono -->
                <div class="form-group">
                    <label for="Telefono">Número Célular:</label>
                    <input type="text" id="Telefono" name="Telefono" required maxlength="10">
                </div>

                <!-- Campo de Correo Electrónico -->
                <div class="form-group">
                    <label for="Correo">Correo Electrónico:</label>
                    <input type="email" id="Correo" name="Correo" required>
                </div>

                <!-- Campos de Programa -->
                <!-- <div class="form-group">
                    <label for="Programa">Programa:</label>
                    <input type="text" id="Programa" name="Programa" required>
                </div> -->

                <div class="form-group">
                    <label for="Programa">Programa:</label>
                    <select id="Programa" name="Programa" required>
                        <option value="">Seleccione una opción</option>
                        <option value="Tecnología en Gestión Administrativa y Financiera - Sede Robledo">Tecnología en Gestión Administrativa y Financiera - Sede Robledo</option>
                        <option value="Tecnología en Gestión de Mercadeo - Sede Robledo">Tecnología en Gestión de Mercadeo - Sede Robledo</option>
                        <option value="Tecnología en Gestión Logística - Sede Robledo">Tecnología en Gestión Logística - Sede Robledo</option>
                        <option value="Tecnología en Comercio Internacional - Sede Robledo">Tecnología en Comercio Internacional - Sede Robledo</option>
                        <option value="Administración Comercial y de Mercadeo - Sede Robledo">Administración Comercial y de Mercadeo - Sede Robledo</option>
                        <option value="Administración de Empresas - Sede Robledo">Administración de Empresas - Sede Robledo</option>
                        <option value="Administración Financiera - Sede Robledo">Administración Financiera - Sede Robledo</option>
                        <option value="Administración Logística - Sede Robledo">Administración Logística - Sede Robledo</option>
                        <option value="Negocios Internacionales - Sede Robledo">Negocios Internacionales - Sede Robledo</option>
                        <option value="Tecnología en Gestión de Mercadeo - Virtual">Tecnología en Gestión de Mercadeo - Virtual</option>
                        <option value="Tecnología en Gestión de Comercio Internacional - Virtual">Tecnología en Gestión de Comercio Internacional - Virtual</option>
                        <option value="Administración Comercial y Mercadeo - Virtual">Administración Comercial y Mercadeo - Virtual</option>
                        <option value="Administración Financiera - Virtual">Administración Financiera - Virtual</option>
                        <option value="Negocios Internacionales - Virtual">Negocios Internacionales - Virtual</option>
                        <option value="Especialización en Administración Tributaria - Sede Premium Plaza">Especialización en Administración Tributaria - Sede Premium Plaza</option>
                        <option value="Especialización en Inteligencia Artificial aplicada a los Negocios - Sede Premium Plaza">Especialización en Inteligencia Artificial aplicada a los Negocios - Sede Premium Plaza</option>
                        <option value="Especialización en Exportación de Servicios - Sede Premium Plaza">Especialización en Exportación de Servicios - Sede Premium Plaza</option>
                        <option value="Especialización en Gerencia Prospectiva y Estratégica - Sede Premium Plaza">Especialización en Gerencia Prospectiva y Estratégica - Sede Premium Plaza</option>
                        <option value="Especialización en Valoración Inmobiliaria - Sede Premium Plaza">Especialización en Valoración Inmobiliaria - Sede Premium Plaza</option>
                        <option value="Especialización en Gerencia de Mercadeo - Sede Premium Plaza">Especialización en Gerencia de Mercadeo - Sede Premium Plaza</option>
                        <option value="Especialización en Gerencia de Proyectos - Sede Premium Plaza">Especialización en Gerencia de Proyectos - Sede Premium Plaza</option>
                        <option value="Especialización en Legislación Aduanera - Sede Premium Plaza">Especialización en Legislación Aduanera - Sede Premium Plaza</option>
                        <option value="Especialización en Gerencia Financiera - Sede Premium Plaza">Especialización en Gerencia Financiera - Sede Premium Plaza</option>
                        <option value="Especialización en Gerencia Logística Internacional - Sede Premium Plaza">Especialización en Gerencia Logística Internacional - Sede Premium Plaza</option>
                        <option value="Maestría en Finanzas - Sede Premium Plaza">Maestría en Finanzas - Sede Premium Plaza</option>
                        <option value="Maestría en Mercadeo - Sede Premium Plaza">Maestría en Mercadeo - Sede Premium Plaza</option>
                        <option value="Maestría en Negocios Internacionales - Sede Premium Plaza">Maestría en Negocios Internacionales - Sede Premium Plaza</option>
                        <option value="Maestría en Logística Integral - Sede Premium Plaza">Maestría en Logística Integral - Sede Premium Plaza</option>
                        <option value="Especialización en Inteligencia Artificial aplicada a los Negocios - Virtual">Especialización en Inteligencia Artificial aplicada a los Negocios - Virtual</option>
                        <option value="Especialización en Gestión de E-commerce y Marketing Digital - Virtual">Especialización en Gestión de E-commerce y Marketing Digital - Virtual</option>
                        <option value="Especialización en Valoración Inmobiliaria - Virtual">Especialización en Valoración Inmobiliaria - Virtual</option>
                        <option value="Otro">Otro</option>
                    </select>
                </div>
                

                <!-- Campos de Semestre -->
                <div class="form-group">
                    <label for="Semestre">Semestre:</label>
                    <input type="number" id="Semestre" name="Semestre" required>
                </div>

                <!-- Archivos -->
                <div class="form-group">
                    <label for="cedula">Documento de Cédula al 150% (PDF):</label>
                    <input type="file" id="cedula" name="archivos" accept="application/pdf" required>
                </div>
                <div class="form-group">
                    <label for="civica">Documento Cívica (PDF):</label>
                    <input type="file" id="civica" name="archivos" accept="application/pdf" required>
                </div>
                <div class="form-group">
                    <label for="servicios">Servicios Públicos (PDF):</label>
                    <input type="file" id="servicios" name="archivos" accept="application/pdf" required>
                </div>
                <div class="form-group">
                    <label for="anexo1">Anexo 1 (PDF):</label>
                    <input type="file" id="anexo1" name="archivos" accept="application/pdf" required>
                </div>
                <div class="form-group">
                    <label for="anexo2">Anexo 2 (Archivo de Excel .xlsx):</label>
                    <input type="file" id="anexo2" name="archivos" accept=".xlsx" required>
                </div>

                <!-- Botón de envío -->
                <div class="form-button form-group">
                    <button type="submit">Enviar Formulario</button>
                </div>
            </form>
        </div>
    </div>
</body>

</html>
<!-- JavaScript de SweetAlert2 -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>

    //validaciones permitir solo dos digitos en semestre
    const semestreInput = document.getElementById('Semestre');

    // Función para limitar los dígitos a 2
    semestreInput.addEventListener('input', function () {
        if (this.value.length > 2) {
            this.value = this.value.slice(0, 2); // Limitar a 2 dígitos
        }
    });

    // Función para calcular la edad a partir de la fecha de nacimiento
    function calcularEdad(fechaNacimiento) {
        const fechaActual = new Date(); // Fecha actual
        const nacimiento = new Date(fechaNacimiento); // Fecha de nacimiento seleccionada
        let edad = fechaActual.getFullYear() - nacimiento.getFullYear();
        const mes = fechaActual.getMonth() - nacimiento.getMonth();

        // Ajustar la edad si aún no ha cumplido años este año
        if (mes < 0 || (mes === 0 && fechaActual.getDate() < nacimiento.getDate())) {
            edad--;
        }

        // Retornar la edad calculada
        return edad;
    }

    // Asociar el cálculo al campo FechaNacimiento
    document.addEventListener("DOMContentLoaded", () => {
        const fechaNacimientoInput = document.getElementById("FechaNacimiento");
        const edadInput = document.getElementById("Edad");

        // Calcular la edad al cambiar la fecha de nacimiento
        fechaNacimientoInput.addEventListener("change", () => {
            const fechaNacimiento = fechaNacimientoInput.value;
            if (fechaNacimiento) {
                const edad = calcularEdad(fechaNacimiento);
                edadInput.value = edad; // Asignar la edad calculada al campo Edad
            } else {
                edadInput.value = ""; // Limpiar el campo Edad si no hay fecha
            }
        });
    });

    document.addEventListener("DOMContentLoaded", () => {
        const estratoInput = document.getElementById("Estrato");

        // Mostrar una alerta personalizada si el valor no está entre 1 y 6
        estratoInput.addEventListener("input", () => {
            const valor = parseInt(estratoInput.value, 10);
            if (valor < 1 || valor > 6) {
                Swal.fire({
                    title: "Valor no permitido",
                    text: "El valor de Estrato debe estar entre 1 y 6.",
                    icon: "warning",
                    customClass: {
                        popup: "my-swal-small-popup",
                        confirmButton: "my-swal-confirm",
                        cancelButton: "my-swal-cancel",
                        icon: "my-swal-icon-warning",
                    },
                });

                estratoInput.value = ""; // Limpiar el campo si el valor no es válido
            }
        });
    });

    // Validación del campo de correo electrónico
    document.addEventListener("DOMContentLoaded", () => {
        const correoInput = document.getElementById("Correo");

        correoInput.addEventListener("input", () => {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/; // Expresión regular para validar correos electrónicos
            if (!emailRegex.test(correoInput.value)) {
                correoInput.setCustomValidity("Por favor, ingrese un correo electrónico válido."); // Mensaje de error
            } else {
                correoInput.setCustomValidity(""); // Elimina el mensaje de error si es válido
            }
        });
    });

    // Función para validar que solo se ingresen números en el campo de Teléfono
    document.addEventListener("DOMContentLoaded", () => {
        const telefonoInput = document.getElementById("Telefono");

        telefonoInput.addEventListener("input", () => {
            telefonoInput.value = telefonoInput.value.replace(/[^0-9]/g, ""); // Elimina cualquier carácter que no sea un número
            const phoneRegex = /^[0-9]*$/; // Solo permite caracteres numéricos
            if (!phoneRegex.test(telefonoInput.value)) {
                telefonoInput.setCustomValidity("El número de teléfono solo debe contener dígitos.");
            } else {
                telefonoInput.setCustomValidity("");
            }
        });
    });

    // Función para convertir el texto de los campos a mayúsculas
    document.addEventListener("DOMContentLoaded", () => {
        const textInputs = document.querySelectorAll('input[type="text"]'); // Seleccionar todos los campos de texto

        textInputs.forEach(input => {
            input.addEventListener("input", () => {
                input.value = input.value.toUpperCase(); // Convertir el texto a mayúsculas
            });
        });
    });

    //validacion de numero documento, para que solo permita letras en cedula de extrangeria
    document.addEventListener("DOMContentLoaded", () => {
        const nroDocumentoInput = document.getElementById("NroDocumento");
        const confirmNroDocumentoInput = document.getElementById("comfirmNroDocumento");
        const errorMessage = document.getElementById("error-message");
        const form = document.getElementById("registroForm");
        const tipoDocumento = document.getElementById("TipoDocumento");

        // Desactivar los campos hasta que se seleccione un tipo de documento
        nroDocumentoInput.disabled = true;
        confirmNroDocumentoInput.disabled = true;

        // Habilitar los campos cuando se seleccione un tipo de documento
        tipoDocumento.addEventListener("change", () => {
            const tipo = tipoDocumento.value;

            if (tipo) {
                // Habilitar campos de número de documento solo si hay un tipo seleccionado
                nroDocumentoInput.disabled = false;
                confirmNroDocumentoInput.disabled = false;
            } else {
                // Deshabilitar campos si no hay tipo seleccionado
                nroDocumentoInput.disabled = true;
                confirmNroDocumentoInput.disabled = true;
                nroDocumentoInput.value = ""; // Limpiar valores
                confirmNroDocumentoInput.value = "";
            }
        });

        // Validar en tiempo real el contenido del campo Número de Documento
        nroDocumentoInput.addEventListener("input", () => {
            const tipo = tipoDocumento.value;

            if (tipo === "C.C." || tipo === "T.I.") {
                // Solo permitir números (para C.C. y T.I.)
                nroDocumentoInput.value = nroDocumentoInput.value.replace(/[^0-9]/g, "");
            } else if (tipo === "C.E.") {
                // Permitir letras y números para C.E.
                nroDocumentoInput.value = nroDocumentoInput.value.replace(/[^a-zA-Z0-9]/g, "");
            }

            // Llamamos a la función de validación en tiempo real
            validarNumeroDocumento();
        });

        // Validar en tiempo real el contenido del campo confirmar Documento
        confirmNroDocumentoInput.addEventListener("input", () => {
            const tipo = tipoDocumento.value;

            if (tipo === "C.C." || tipo === "T.I.") {
                // Solo permitir números
                confirmNroDocumentoInput.value = confirmNroDocumentoInput.value.replace(/[^0-9]/g, "");
            } else if (tipo === "C.E.") {
                // Permitir letras y números (ninguna restricción)
                confirmNroDocumentoInput.value = confirmNroDocumentoInput.value.replace(/[^a-zA-Z0-9]/g, "");
            } else {
                // Vaciar el campo si no se selecciona un tipo válido
                confirmNroDocumentoInput.value = "";
            }
        });

        confirmNroDocumentoInput.addEventListener("input", () => {
            // Llamamos a la función de validación en tiempo real
            validarNumeroDocumento();
        });

        // Función de validación para los números de documento
        function validarNumeroDocumento() {
            const nroDocumento = nroDocumentoInput.value.trim();
            const confirmNroDocumento = confirmNroDocumentoInput.value.trim();

            if (nroDocumento === "" || confirmNroDocumento === "") {
                errorMessage.textContent = "Ambos campos de número de documento son obligatorios.";
                errorMessage.style.display = "block";
                return false;
            }

            if (nroDocumento !== confirmNroDocumento) {
                errorMessage.textContent = "Los números de documento no coinciden.";
                errorMessage.style.display = "block";
                return false;
            }

            errorMessage.textContent = "";
            errorMessage.style.display = "none";
            return true;
        }

        // Validación final al enviar
        form.addEventListener("submit", (event) => {
            // Solo prevenimos el envío si la validación falla
            if (!validarNumeroDocumento()) {
                event.preventDefault(); // Detenemos el envío del formulario
                Swal.fire({
                    icon: "error",
                    title: "Error",
                    text: "Los números de documento no coinciden o están vacíos. Corrige el error antes de continuar.",
                });
            }
        });
    });



</script>



<script>
    document.addEventListener("DOMContentLoaded", () => {
        const registroForm = document.getElementById("registroForm"); // Formulario

        // Estilos personalizados para SweetAlert2
        const style = document.createElement('style');
        style.innerHTML = `
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');
  
        /* Estilo de la alerta personalizada */
        .my-swal-popup {
            background-color: #f1f1f1 !important;
            color: #333 !important;
            font-family: 'Poppins', sans-serif !important;
            border-radius: 15px !important;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1) !important;
            padding: 20px !important;
            width: 400px !important; /* Más pequeño solo para esta alerta */
            max-width: 75% !important;
            font-size: 14px !important;
        }

        /* Estilo reducido SOLO para la alerta de Estrato */
        .my-swal-small-popup {
            background-color: #f1f1f1 !important;
            color: #333 !important;
            font-family: 'Poppins', sans-serif !important;
            border-radius: 12px !important;
            box-shadow: 0 3px 5px rgba(0, 0, 0, 0.1) !important;
            padding: 15px !important;
            width: 400px !important; /* Más pequeño solo para esta alerta */
            max-width: 75% !important;
            font-size: 14px !important;
        }
  
        /* Botones personalizados */
        .my-swal-confirm {
            background-color: #202B52 !important; /* Azul oscuro */
            color: white !important;
            border: none !important;
            font-family: 'Poppins', sans-serif !important;
            border-radius: 8px !important;
            padding: 10px 20px !important;
            font-weight: 600;
            
        }
  
        .my-swal-cancel {
            background-color: #ef4444 !important; /* Rojo */
            color: white !important;
            border: none !important;
            font-family: 'Poppins', sans-serif !important;
            border-radius: 8px !important;
            padding: 10px 20px !important;
            font-weight: 600;
        }
  
        /* Ícono de advertencia */
        .my-swal-icon-warning {
            border-color: #202B52 !important;
            color: #202B52 !important;
        }

         /* Forzar el color en botones de SweetAlert2 */
        .swal2-confirm {
            background-color: #202B52 !important;
            color: white !important;
            border: none !important;
            font-family: 'Poppins', sans-serif !important;
            border-radius: 8px !important;
            padding: 8px 16px !important;
            font-weight: 600 !important;
            
        }
      `;
        document.head.appendChild(style); // Agregar los estilos al <head> del documento

        registroForm.addEventListener("submit", (e) => {
            e.preventDefault(); // Prevenir el envío inicial del formulario

            // Mostrar alerta de confirmación con SweetAlert2
            Swal.fire({
                title: '¿Estás seguro?',
                text: "Verifica que los datos ingresados sean correctos antes de continuar.",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonText: 'Sí, enviar',
                cancelButtonText: 'Cancelar',
                customClass: {
                    popup: 'my-swal-popup',
                    confirmButton: 'my-swal-confirm',
                    cancelButton: 'my-swal-cancel',
                    icon: 'my-swal-icon-warning'
                }
            }).then((result) => {
                if (result.isConfirmed) {
                    // Si el usuario confirma, se envía el formulario
                    Swal.fire({
                        title: 'Enviado!',
                        text: 'Tu formulario ha sido enviado correctamente.',
                        icon: 'success',
                        customClass: {
                            popup: 'my-swal-popup',
                        },
                        timer: 3000,  // Tiempo en milisegundos (5000 ms = 5 segundos)
                        timerProgressBar: true, // Muestra una barra de progreso para el timer
                        didClose: () => {
                            // Enviar el formulario después de que el timer se complete
                            registroForm.submit();
                        }
                    });

                } else {
                    // Mensaje si se cancela el envío
                    Swal.fire({
                        title: 'Cancelado',
                        text: 'El formulario no se ha enviado.',
                        icon: 'info',
                        customClass: {
                            popup: 'my-swal-popup',
                            confirmButton: 'my-swal-confirm',
                            icon: 'my-swal-icon-warning'
                        }
                    });
                }
            });
        });
    });

    //validacion para solo letras en nombre, apellido1 y apellido2
    function validarSoloLetras(input) {
        input.value = input.value.replace(/[^a-zA-ZáéíóúÁÉÍÓÚñÑ\s]/g, ''); // Permite solo letras y espacios
    }

    // Asignar el evento a cada campo
    document.getElementById("NombreCompleto").addEventListener("input", function () {
        validarSoloLetras(this);
    });
    document.getElementById("Apellido1").addEventListener("input", function () {
        validarSoloLetras(this);
    });
    document.getElementById("Apellido2").addEventListener("input", function () {
        validarSoloLetras(this);
    });  
</script>